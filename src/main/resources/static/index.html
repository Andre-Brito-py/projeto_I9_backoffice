<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notas BKO I9 - Sistema de Gestão de Notas</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-clipboard-list"></i>
                <span>Notas BKO I9</span>
            </div>
            <div class="header-actions">
                <button class="btn btn-primary" id="btnNovoItem">
                    <i class="fas fa-plus"></i> Novo
                </button>
            </div>
        </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar">
        <nav class="sidebar-nav">
            <a href="#" class="nav-link active" data-section="dashboard">
                <i class="fas fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </a>
            <a href="#" class="nav-link" data-section="lojas">
                <i class="fas fa-store"></i>
                <span>Lojas</span>
            </a>
            <a href="#" class="nav-link" data-section="notas">
                <i class="fas fa-sticky-note"></i>
                <span>Notas Gerais</span>
            </a>
            <a href="#" class="nav-link" data-section="lembretes">
                <i class="fas fa-bell"></i>
                <span>Lembretes</span>
            </a>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Section -->
        <section id="dashboard" class="section active">
                <div class="section-header">
                    <h2><i class="fas fa-tachometer-alt"></i> Dashboard</h2>
                    <p>Visão geral do sistema</p>
                </div>
                
                <!-- Cards de Resumo -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-store"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalLojas">0</h3>
                            <p>Total de Lojas</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-tags"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalCategorias">0</h3>
                            <p>Categorias Criadas</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="notasPendentes">0</h3>
                            <p>Notas Pendentes</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-bell"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="lembretesProximos">0</h3>
                            <p>Lembretes Próximos</p>
                        </div>
                    </div>
                </div>

                <!-- Ações Rápidas -->
                <div class="quick-actions">
                    <h3><i class="fas fa-bolt"></i> Ações Rápidas</h3>
                    <div class="quick-actions-grid">
                        <button class="quick-action-btn" onclick="Navigation.showSection('lojas'); StoreManager.showCreateModal();">
                            <i class="fas fa-store"></i>
                            <span>Nova Loja</span>
                        </button>
                        <button class="quick-action-btn" onclick="Navigation.showSection('notas'); if(window.NoteManager) NoteManager.showCreateModal();">
                            <i class="fas fa-sticky-note"></i>
                            <span>Nova Nota</span>
                        </button>
                        <button class="quick-action-btn" onclick="Navigation.showSection('lembretes');">
                            <i class="fas fa-bell"></i>
                            <span>Novo Lembrete</span>
                        </button>
                        <button class="quick-action-btn" onclick="Navigation.showSection('lojas');">
                            <i class="fas fa-search"></i>
                            <span>Buscar Lojas</span>
                        </button>
                    </div>
                </div>

                <!-- Atividades Recentes -->
                <div class="dashboard-content">
                    <div class="dashboard-section">
                        <h3><i class="fas fa-history"></i> Atividades Recentes</h3>
                        <div class="activity-list" id="atividadesRecentes">
                            <!-- Conteúdo carregado via JavaScript -->
                        </div>
                    </div>
                    
                    <div class="dashboard-section">
                        <h3><i class="fas fa-chart-pie"></i> Distribuição de Notas</h3>
                        <div class="chart-container" id="chartContainer">
                            <!-- Gráfico será inserido aqui -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Lojas Section -->
            <section id="lojas" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-store"></i> Gestão de Lojas</h2>
                    <div class="section-actions">
                        <button class="btn btn-primary" id="btnNovaLoja">
                            <i class="fas fa-plus"></i> Nova Loja
                        </button>
                    </div>
                </div>
                
                <div class="search-bar">
                    <input type="text" id="searchLojas" placeholder="Buscar lojas..." class="search-input">
                    <i class="fas fa-search search-icon"></i>
                </div>
                
                <div class="lojas-layout">
                    <div class="lojas-list" id="lojasGrid">
                        <!-- Lista de lojas será carregada via JavaScript -->
                    </div>
                    
                    <div class="loja-details" id="lojaDetails">
                        <div class="loja-details-header">
                            <h3 id="lojaDetailsTitle">Selecione uma loja</h3>
                            <button class="btn btn-secondary" id="btnAddNotaLoja" style="display: none;">
                                <i class="fas fa-plus"></i> Nova Nota
                            </button>
                        </div>
                        
                        <div class="loja-info" id="lojaInfo" style="display: none;">
                            <!-- Informações da loja selecionada -->
                        </div>
                        
                        <div class="loja-contatos" id="lojaContatos">
                            <div class="contatos-header">
                                <h4><i class="fas fa-users"></i> Funcionários</h4>
                                <button class="btn btn-sm btn-primary" id="btnAddContatoLoja" style="display: none;">
                                    <i class="fas fa-user-plus"></i> Adicionar Funcionário
                                </button>
                            </div>
                            <div class="contatos-list" id="contatosLojaList">
                                <p class="text-muted">Selecione uma loja para ver os funcionários</p>
                            </div>
                        </div>
                        
                        <div class="loja-notas" id="lojaNotas">
                            <h4><i class="fas fa-sticky-note"></i> Notas da Loja</h4>
                            <div class="notas-list" id="notasLojaList">
                                <p class="text-muted">Selecione uma loja para ver suas notas</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Notes Section -->
            <section id="notas" class="section">
                <div class="section-header">
                    <div>
                        <h2><i class="fas fa-sticky-note"></i> Gerenciar Notas</h2>
                        <p>Organize suas anotações por loja e categoria</p>
                    </div>
                    <div class="section-actions">
                        <button class="btn btn-primary" onclick="NoteManager.showCreateModal()">
                            <i class="fas fa-plus"></i> Nova Nota
                        </button>
                        <button class="btn btn-secondary" onclick="NoteManager.clearFilters()">
                            <i class="fas fa-filter"></i> Limpar Filtros
                        </button>
                    </div>
                </div>
                
                <div class="search-bar">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="notes-search" class="search-input" placeholder="Buscar notas por título ou conteúdo...">
                </div>
                
                <div class="filters mb-2 flex gap-2">
                    <select id="notes-status-filter" class="filter-select">
                        <option value="">Todos os status</option>
                        <option value="PENDENTE">Pendente</option>
                        <option value="EM_ANDAMENTO">Em Andamento</option>
                        <option value="CONCLUIDO">Concluído</option>
                    </select>
                    <select id="store-filter" class="filter-select">
                        <option value="">Todas as lojas</option>
                    </select>
                    <select id="category-filter" class="filter-select">
                        <option value="">Todas as categorias</option>
                    </select>
                </div>
                
                <div id="notes-list" class="content-list">
                    <!-- Notes will be loaded here -->
                </div>
            </section>

            <!-- Reminders Section -->
            <section id="lembretes" class="section">
                <div class="section-header">
                    <div>
                        <h2><i class="fas fa-bell"></i> Lembretes</h2>
                        <p>Gerencie seus lembretes e pendências</p>
                    </div>
                    <div class="section-actions">
                        <button class="btn btn-primary" onclick="ReminderManager.showCreateModal()">
                            <i class="fas fa-plus"></i> Novo Lembrete
                        </button>
                        <button class="btn btn-secondary" onclick="ReminderManager.clearFilters()">
                            <i class="fas fa-filter"></i> Limpar Filtros
                        </button>
                    </div>
                </div>
                
                <div class="search-bar">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="reminders-search" class="search-input" placeholder="Buscar lembretes por título ou descrição...">
                </div>
                
                <div class="filters mb-2 flex gap-2">
                    <select id="reminders-status-filter" class="filter-select">
                        <option value="all">Todos os lembretes</option>
                        <option value="active">Ativos</option>
                        <option value="inactive">Inativos</option>
                        <option value="upcoming">Próximos (24h)</option>
                        <option value="overdue">Atrasados</option>
                    </select>
                    <select id="note-filter" class="filter-select">
                        <option value="">Todas as notas</option>
                    </select>
                </div>
                
                <div id="reminders-list" class="content-list">
                    <!-- Reminders will be loaded here -->
                </div>
            </section>
    </main>

    <!-- Modal Container -->
    <div id="modalContainer" class="modal-overlay">
        <!-- Modais serão inseridos aqui via JavaScript -->
    </div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-spinner">
        <div class="spinner"></div>
        <p>Carregando...</p>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Modals -->
    <!-- Store Modal -->
    <div id="store-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h2 id="store-modal-title" class="modal-title">
                    <i class="fas fa-store"></i> Nova Loja
                </h2>
            </div>
            <div class="modal-content">
                <form id="store-form">
                    <input type="hidden" id="store-id">
                    <div class="form-group">
                        <label for="store-nome" class="form-label">Nome *</label>
                        <input type="text" id="store-nome" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="store-descricao" class="form-label">Descrição</label>
                        <textarea id="store-descricao" class="form-textarea"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="store-endereco" class="form-label">Endereço</label>
                        <input type="text" id="store-endereco" class="form-input">
                    </div>
                    <div class="form-group">
                        <label for="store-telefone" class="form-label">Telefone</label>
                        <input type="tel" id="store-telefone" class="form-input">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-close-modal>Cancelar</button>
                <button type="submit" form="store-form" class="btn btn-primary">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Note Modal -->
    <div id="note-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h2 id="note-modal-title" class="modal-title">
                    <i class="fas fa-sticky-note"></i> Nova Nota
                </h2>
            </div>
            <div class="modal-content">
                <form id="note-form">
                    <input type="hidden" id="note-id">
                    <div class="form-group">
                        <label for="note-titulo" class="form-label">Título *</label>
                        <input type="text" id="note-titulo" class="form-input" required>
                    </div>
                    <input type="hidden" id="note-loja-id">
                    <div class="form-group">
                        <label for="note-conteudo" class="form-label">Conteúdo *</label>
                        <textarea id="note-conteudo" class="form-textarea" rows="4" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="note-status" class="form-label">Status *</label>
                        <select id="note-status" class="form-select" required>
                            <option value="PENDENTE">Pendente</option>
                            <option value="EM_ANDAMENTO">Em Andamento</option>
                            <option value="CONCLUIDO">Concluído</option>
                        </select>
                    </div>

                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-close-modal>Cancelar</button>
                <button type="submit" form="note-form" class="btn btn-primary">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Reminder Modal -->
    <div id="reminder-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h2 id="reminder-modal-title" class="modal-title">
                    <i class="fas fa-bell"></i> Novo Lembrete
                </h2>
            </div>
            <div class="modal-content">
                <form id="reminder-form">
                    <input type="hidden" id="reminder-id">
                    <div class="form-group">
                        <label for="reminder-titulo" class="form-label">Título *</label>
                        <input type="text" id="reminder-titulo" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="reminder-descricao" class="form-label">Descrição</label>
                        <textarea id="reminder-descricao" class="form-textarea" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="reminder-data-hora" class="form-label">Data e Hora *</label>
                        <input type="datetime-local" id="reminder-data-hora" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="reminder-nota" class="form-label">Nota *</label>
                        <select id="reminder-nota" class="form-select" required>
                            <option value="">Selecione uma nota</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" id="reminder-ativo" checked> Ativo
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-close-modal>Cancelar</button>
                <button type="submit" form="reminder-form" class="btn btn-primary">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Contact Modal -->
    <div id="contact-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h2 id="contact-modal-title" class="modal-title">
                    <i class="fas fa-user"></i> Novo Funcionário
                </h2>
            </div>
            <div class="modal-content">
                <form id="contact-form">
                    <input type="hidden" id="contact-id">
                    <input type="hidden" id="contact-loja-id">
                    <div class="form-group">
                        <label for="contact-nome" class="form-label">Nome *</label>
                        <input type="text" id="contact-nome" class="form-input" required>
                    </div>
                    <div class="form-group">
                        <label for="contact-matricula" class="form-label">Matrícula *</label>
                        <input type="text" id="contact-matricula" class="form-input" required placeholder="T1234567" maxlength="8">
                        <div id="matricula-error" class="error-message" style="display: none; color: #dc3545; font-size: 0.875em; margin-top: 0.25rem;">Digite uma matrícula válida</div>
                    </div>
                    <div class="form-group">
                        <label for="contact-cargo" class="form-label">Cargo *</label>
                        <select id="contact-cargo" class="form-select" required>
                            <option value="">Selecione um cargo</option>
                            <option value="GERENTE">Gerente</option>
                            <option value="PROPRIETARIO">Proprietário</option>
                            <option value="VENDEDOR">Vendedor</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="contact-telefone" class="form-label">Telefone</label>
                        <input type="tel" id="contact-telefone" class="form-input">
                    </div>
                    <div class="form-group">
                        <label for="contact-email" class="form-label">Email</label>
                        <input type="email" id="contact-email" class="form-input">
                    </div>
                    <div class="form-group">
                        <label for="contact-observacoes" class="form-label">Observações</label>
                        <textarea id="contact-observacoes" class="form-textarea" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-close-modal>Cancelar</button>
                <button type="submit" form="contact-form" class="btn btn-primary">Salvar</button>
            </div>
        </div>
    </div>

    <!-- Reminders List Modal -->
    <div id="reminders-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-bell"></i> Lembretes da Nota
                </h2>
            </div>
            <div class="modal-content">
                <div class="mb-2">
                    <button class="btn btn-primary" onclick="ReminderManager.createForNote(AppState.currentNote)">
                        <i class="fas fa-plus"></i> Novo Lembrete
                    </button>
                </div>
                <div id="reminders-list"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-close-modal>Fechar</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/app.js"></script>
    <script src="js/notes.js"></script>
    <script src="js/reminders.js"></script>
</body>
</html>